package simplechat;// This file contains material supporting section 3.7 of the textbook:// "Object Oriented Software Engineering" and is issued under the open-source// license found at www.lloseng.com import ocsf.server.AbstractServer;import ocsf.server.ConnectionToClient;/** * This class overrides some of the methods in the abstract * superclass in order to give more functionality to the server. * * @author Dr Timothy C. Lethbridge * @author Dr Robert Lagani&egrave;re * @author Fran&ccedil;ois B&eacute;langer * @author Paul Holden * @version July 2000 */public class EchoServer extends AbstractServer{    /**     * The default port to listen on.     */    public static final int DEFAULT_PORT = 5555;    /**     * Constructs an instance of the echo server.     *     * @param port The port number to connect on.     */    public EchoServer(int port)    {        super(port);    }    //Instance methods ************************************************    /**     * This method is responsible for the creation of     * the server instance (there is no UI in this phase).     *     * @param args [port] The port number to listen on.  Defaults to 5555     *             if no argument is entered.     */    public static void main(String[] args)    {        int port = 0; //Port to listen on        try        {            port = Integer.parseInt(args[0]); //Get port from command line        }        catch (Throwable t)        {            port = DEFAULT_PORT; //Set port to 5555        }        EchoServer sv = new EchoServer(port);        try        {            sv.listen(); //Start listening for connections        }        catch (Exception ex)        {            System.out.println("ERROR - Could not listen for clients!");        }    }    /**     * This method handles any messages received from the simplechat.client.     *     * @param msg    The message received from the simplechat.client.     * @param client The connection from which the message originated.     */    @Override    public void handleMessageFromClient    (Object msg, ConnectionToClient client)    {        System.out.println("Message received: " + msg + " from " + client);        this.sendToAllClients(msg);    }    @Override    protected void serverStarted()    {        System.out.println("Server listening for connections on port " + getPort());    }    @Override    protected void serverStopped()    {        System.out.println("Server has stopped listening for connections.");    }    @Override    protected synchronized void clientDisconnected(ConnectionToClient client)    {        System.out.format("%s disconnected.\n", client.getName());    }    @Override    protected void clientConnected(ConnectionToClient client)    {        System.out.format("%s connected.\n", client.getName());    }    @Override    protected synchronized void clientException(ConnectionToClient client, Throwable exception)    {        this.clientDisconnected(client);    }}